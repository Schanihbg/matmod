#+TITLE: Kmom 01: Introduktion till tidsserieanalys
#+AUTHOR: Henrik Frediksson och Thomas Sievert

I detta kursmoment så kommer vi gå igenom vad en tidsserie är och hur
man approximera derivatan för en tidsserie.

En tidsserie är följd observationer ~x_1, x_2,...,x_T~ som är ordnade
efter tiden. Observationen vid tidpunkten ~t~ betecknas med ~x_t~.

Exempel på tidsserier är antalet bilar per timme som igenom kör förbi BTH under
en dag, värdet på en viss aktie vid börsstängning under ett år och
antalet studenter antagna till Webbprogammeringsprogrammet under en 10
års period.

Antag att vi under en 10-timmars period gjort följande observationer

~x_1 = 12, x_2 = 11, x_3 = 10, x_4 = 6, x_5 = 12, x_6 = 15, x_7 = 9, x_8
= 8, x_9 = 13, x_10 = 8~

Med hjälp av [[https://matplotlib.org/][matplotlib]] så kan vi plotta tidsserien.

#+begin_src python :session
import matplotlib.pyplot as plt

t = range(1,11)
x = [12, 11, 10,6, 12, 15, 9, 8, 13, 8]

plt.ylim((0,17))
plt.xlabel('Time')
plt.ylabel('Observations')
plt.title('Timeseries example')
plt.grid(True)
plt.plot(t,x, 'bo-')
plt.savefig('timeseries.png')

plt.show()

#+end_src

#+RESULTS:

[[https://github.com/henrikfredriksson/matmod/blob/master/material/kmom01/timeseries.png]]


Antag att grafen ovan representerar en funktion ~f~. Tyvärr så kan vi inte använda derivatans definition för att
för att beräkna derivatan eftersom vi inte vet hur
funktionen är definierad. Det vi kan använda oss av är numerisk
derivering. Vi ska med
hjälp av /bakåt differenskvot/, /framåt differenskvot/ och /central
differenskvot/ beräkna derivatan. Ni hittar information om olika
differenskvote på sidan 213 i Matematik 5000 3c.

Följande videos demonsterar hur man använda differenskvoter för att
beräkan derivatan numeriskt

[[https://www.youtube.com/watch?v=ZetlczRQtf8][Differenskvoter 1]]

[[https://www.youtube.com/watch?v=O8BihHoIZ-Y&t][Differenskvoter 2]]


I [[https://pandas.pydata.org/][pandas]] finns metoden =diff= för datatypen =DataFrame= som returnerar en array
med element =x[t+1] - x[t]=. Ni kan använda denna metod för att
jämföra med er metod.
 
#+begin_src python :session
import matplotlib.pyplot as plt
import pandas as pd

t = range(1,11)
x = [12,11,10,6,12, 15,9,8,13, 8]

df = pd.Series(x, index=t)
dt = df.diff()
plt.xlabel('Time')
plt.ylabel('Observations')
plt.title('Timeseries example + Derivative')
plt.grid(True)
plt.plot(t,x, 'bo-', t, dt, 'r-')
plt.show()
#+end_src

#+RESULTS:
: Text(0.5,1,'Timeseries example + derivative')

[[https://github.com/henrikfredriksson/matmod/blob/master/material/kmom01/timeseries_derivative.png]]


* Uppgifter
Uppgifterna ska redovisas på en webbsida som ni skapar själva och ska
innehålla följande:


1. Hitta en tidsserie som ni vill använda för uppgiften och plotta
   tidsserien.

2. Ni ska implementera egna metoder för att numeriskt beräkna derivatan
   med hjälp av framåt-, bakåt- och central differenskvot.

3. Plotta tiddserien med de numeriska derivatorna i samma fönster.

4. Dela in er tidsserie i ett antal lika stora tidsintervall och
   beräkna medelvärdet av observationerna för varje tidsintervall. Beräkna
   och plotta den nya tidsserien tillsammans med de olika derivatorna.

5. Reflektera över och beskriv vad derivatan för den tidsserie ni valt
   betyder. Vad är för- och nackdelarna med att använda "genomsnittsfiltret"?

6. Inlämning sker via itslearning där ni ska bifoga länk till den
   webbsida som ni skapat. Ni ska därefter bedöma en studiekamrats
   webbsida (tilldelning av bedömning bestäms senare) utifrån följande
   punkter.

   - Är det tydligt vad tidsserien beskriver?
   - Framgår det tydligt vad derivatan för tidsserien beskriver?
   - Verkar beräkningar derivatorna för tidsserien stämma?
   
